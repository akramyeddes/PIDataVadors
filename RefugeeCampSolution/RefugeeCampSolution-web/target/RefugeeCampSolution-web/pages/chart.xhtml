<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:jsf="http://xmlns.jcp.org/jsf"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
	xmlns:p="http://primefaces.org/ui"
>
<h:head></h:head> 


<body> 

	<h:outputScript name="js/pdfmake/pdfmake.min.js" />
<h:outputScript name="js/pdfmake/vfs_fonts.js" />
 
<h:form id="form1">
	
<p:chart type="pie" model="#{meBean.pie}" style="width:400px;height:300px" widgetVar="chart" />

<p:commandButton type="button" value="Export" icon="ui-icon-extlink" onclick="exportChart()"/>
 
 <p:dialog widgetVar="dlg" showEffect="fade" modal="true" header="Chart as an Image">
    <p:outputPanel id="output" layout="block" style="width:500px;height:300px"/>
  </p:dialog> 
 
</h:form>
<script type="text/javascript">
  function exportChart() 
  {
    $(PrimeFaces.escapeClientId('form1:output')).empty().append(chartWgt.exportAsImage());
    dlg.show();
  }
</script>
</body>
</html>